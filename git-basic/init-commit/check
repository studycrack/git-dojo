#!/opt/pwn.college/bash

set -e

REPO=$(cat /tmp/repo_path)

# Check if /tmp/repo exists and is a directory
if [ ! -d "$REPO" ]; then
    echo "[-] $REPO not found!"
    exit 1
fi

# Check if .git directory exists
if [ ! -d .git ]; then
  echo "[-] Git repository not initialized in /tmp/repo!"
  exit 1
fi

# Check if there is at least one commit
if ! git rev-parse --verify HEAD >/dev/null 2>&1; then
  echo "[-] No commit history found!"
  exit 1
fi

# Check if hello.txt is being tracked
if ! git ls-files --error-unmatch hello.txt >/dev/null 2>&1; then
  echo "[-] hello.txt has not been properly committed!"
  exit 1
fi

echo "[+] Check passed! Here is your flag:"
cat /flag
